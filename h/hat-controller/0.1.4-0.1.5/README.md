# Comparing `tmp/hat_controller-0.1.4-cp310.cp311.cp312-abi3-win_amd64.whl.zip` & `tmp/hat_controller-0.1.5-cp310.cp311.cp312-abi3-win_amd64.whl.zip`

## zipinfo {}

```diff
@@ -1,32 +1,32 @@
-Zip file size: 1024185 bytes, number of entries: 30
-?rw-------  2.0 unx     2609 b- defN 24-May-02 17:48 hat/controller/common.py
-?rw-------  2.0 unx     1936 b- defN 24-May-02 17:48 hat/controller/main.py
-?rw-------  2.0 unx      134 b- defN 24-May-02 17:48 hat/controller/__main__.py
-?rw-------  2.0 unx     1038 b- defN 24-May-02 17:48 hat/controller/runner.py
-?rw-------  2.0 unx      422 b- defN 24-May-02 17:48 hat/controller/api/units/timers.d.ts
-?rw-------  2.0 unx     3565 b- defN 24-May-02 17:48 hat/controller/environment.py
-?rw-------  2.0 unx     3309 b- defN 24-May-02 17:48 hat/controller/evaluator.py
-?rw-------  2.0 unx      372 b- defN 24-May-02 17:48 hat/controller/api/units/os.d.ts
-?rw-------  2.0 unx      359 b- defN 24-May-02 17:48 hat/controller/api/units/triggers.d.ts
-?rw-------  2.0 unx     1920 b- defN 24-May-02 17:48 hat/controller/units/triggers.py
-?rw-------  2.0 unx      731 b- defN 24-May-02 17:48 hat/controller/interpreters/__init__.py
-?rw-------  2.0 unx      467 b- defN 24-May-02 17:48 hat/controller/api/controller.d.ts
-?rw-------  2.0 unx      280 b- defN 24-May-02 17:48 hat/controller/interpreters/quickjs.py
-?rw-------  2.0 unx     2612 b- defN 24-May-02 17:48 hat/controller/units/os.py
-?rw-------  2.0 unx     2281 b- defN 24-May-02 17:48 hat/controller/engine.py
-?rw-------  2.0 unx        0 b- defN 24-May-02 17:48 hat/controller/units/__init__.py
-?rw-------  2.0 unx      519 b- defN 24-May-02 17:48 hat/controller/interpreters/common.py
-?rw-------  2.0 unx      351 b- defN 24-May-02 17:48 hat/controller/api/units/log.d.ts
-?rw-------  2.0 unx     1619 b- defN 24-May-02 17:48 hat/controller/units/log.py
-?rw-------  2.0 unx     2729 b- defN 24-May-02 17:48 hat/controller/json_schema_repo.json
-?rw-------  2.0 unx      280 b- defN 24-May-02 17:48 hat/controller/interpreters/duktape.py
-?rw-------  2.0 unx        0 b- defN 24-May-02 17:48 hat/controller/__init__.py
-?rw-------  2.0 unx     4420 b- defN 24-May-02 17:48 hat/controller/units/timers.py
-?rw-------  2.0 unx   919105 b- defN 24-May-02 17:48 hat/controller/interpreters/_duktape.abi3.pyd
-?rw-------  2.0 unx  1366251 b- defN 24-May-02 17:48 hat/controller/interpreters/_quickjs.abi3.pyd
-?rw-------  2.0 unx    11358 b- defN 24-May-02 17:48 hat_controller-0.1.4.dist-info/LICENSE
-?rw-------  2.0 unx       60 b- defN 24-May-02 17:48 hat_controller-0.1.4.dist-info/entry_points.txt
-?rw-------  2.0 unx     2674 b- defN 24-May-02 17:48 hat_controller-0.1.4.dist-info/METADATA
-?rw-------  2.0 unx      137 b- defN 24-May-02 17:48 hat_controller-0.1.4.dist-info/WHEEL
-?rw-------  2.0 unx     2640 b- defN 24-May-02 17:48 hat_controller-0.1.4.dist-info/RECORD
-30 files, 2334178 bytes uncompressed, 1019889 bytes compressed:  56.3%
+Zip file size: 1024737 bytes, number of entries: 30
+?rw-------  2.0 unx  1367719 b- defN 24-May-03 22:33 hat/controller/interpreters/_quickjs.abi3.pyd
+?rw-------  2.0 unx      519 b- defN 24-May-03 22:33 hat/controller/interpreters/common.py
+?rw-------  2.0 unx      134 b- defN 24-May-03 22:33 hat/controller/__main__.py
+?rw-------  2.0 unx      372 b- defN 24-May-03 22:33 hat/controller/api/units/os.d.ts
+?rw-------  2.0 unx      280 b- defN 24-May-03 22:33 hat/controller/interpreters/duktape.py
+?rw-------  2.0 unx      422 b- defN 24-May-03 22:33 hat/controller/api/units/timers.d.ts
+?rw-------  2.0 unx     1920 b- defN 24-May-03 22:33 hat/controller/units/triggers.py
+?rw-------  2.0 unx     4420 b- defN 24-May-03 22:33 hat/controller/units/timers.py
+?rw-------  2.0 unx      280 b- defN 24-May-03 22:33 hat/controller/interpreters/quickjs.py
+?rw-------  2.0 unx     2281 b- defN 24-May-03 22:33 hat/controller/engine.py
+?rw-------  2.0 unx     4232 b- defN 24-May-03 22:33 hat/controller/environment.py
+?rw-------  2.0 unx     3309 b- defN 24-May-03 22:33 hat/controller/evaluator.py
+?rw-------  2.0 unx        0 b- defN 24-May-03 22:33 hat/controller/__init__.py
+?rw-------  2.0 unx     1038 b- defN 24-May-03 22:33 hat/controller/runner.py
+?rw-------  2.0 unx     1936 b- defN 24-May-03 22:33 hat/controller/main.py
+?rw-------  2.0 unx      467 b- defN 24-May-03 22:33 hat/controller/api/controller.d.ts
+?rw-------  2.0 unx      359 b- defN 24-May-03 22:33 hat/controller/api/units/triggers.d.ts
+?rw-------  2.0 unx     2729 b- defN 24-May-03 22:33 hat/controller/json_schema_repo.json
+?rw-------  2.0 unx   919105 b- defN 24-May-03 22:33 hat/controller/interpreters/_duktape.abi3.pyd
+?rw-------  2.0 unx     2609 b- defN 24-May-03 22:33 hat/controller/common.py
+?rw-------  2.0 unx     1619 b- defN 24-May-03 22:33 hat/controller/units/log.py
+?rw-------  2.0 unx      351 b- defN 24-May-03 22:33 hat/controller/api/units/log.d.ts
+?rw-------  2.0 unx        0 b- defN 24-May-03 22:33 hat/controller/units/__init__.py
+?rw-------  2.0 unx     2612 b- defN 24-May-03 22:33 hat/controller/units/os.py
+?rw-------  2.0 unx      731 b- defN 24-May-03 22:33 hat/controller/interpreters/__init__.py
+?rw-------  2.0 unx    11358 b- defN 24-May-03 22:33 hat_controller-0.1.5.dist-info/LICENSE
+?rw-------  2.0 unx       60 b- defN 24-May-03 22:33 hat_controller-0.1.5.dist-info/entry_points.txt
+?rw-------  2.0 unx     2674 b- defN 24-May-03 22:33 hat_controller-0.1.5.dist-info/METADATA
+?rw-------  2.0 unx      137 b- defN 24-May-03 22:33 hat_controller-0.1.5.dist-info/WHEEL
+?rw-------  2.0 unx     2640 b- defN 24-May-03 22:33 hat_controller-0.1.5.dist-info/RECORD
+30 files, 2336313 bytes uncompressed, 1020441 bytes compressed:  56.3%
```

## zipnote {}

```diff
@@ -1,91 +1,91 @@
-Filename: hat/controller/common.py
+Filename: hat/controller/interpreters/_quickjs.abi3.pyd
 Comment: 
 
-Filename: hat/controller/main.py
+Filename: hat/controller/interpreters/common.py
 Comment: 
 
 Filename: hat/controller/__main__.py
 Comment: 
 
-Filename: hat/controller/runner.py
+Filename: hat/controller/api/units/os.d.ts
 Comment: 
 
-Filename: hat/controller/api/units/timers.d.ts
+Filename: hat/controller/interpreters/duktape.py
 Comment: 
 
-Filename: hat/controller/environment.py
+Filename: hat/controller/api/units/timers.d.ts
 Comment: 
 
-Filename: hat/controller/evaluator.py
+Filename: hat/controller/units/triggers.py
 Comment: 
 
-Filename: hat/controller/api/units/os.d.ts
+Filename: hat/controller/units/timers.py
 Comment: 
 
-Filename: hat/controller/api/units/triggers.d.ts
+Filename: hat/controller/interpreters/quickjs.py
 Comment: 
 
-Filename: hat/controller/units/triggers.py
+Filename: hat/controller/engine.py
 Comment: 
 
-Filename: hat/controller/interpreters/__init__.py
+Filename: hat/controller/environment.py
 Comment: 
 
-Filename: hat/controller/api/controller.d.ts
+Filename: hat/controller/evaluator.py
 Comment: 
 
-Filename: hat/controller/interpreters/quickjs.py
+Filename: hat/controller/__init__.py
 Comment: 
 
-Filename: hat/controller/units/os.py
+Filename: hat/controller/runner.py
 Comment: 
 
-Filename: hat/controller/engine.py
+Filename: hat/controller/main.py
 Comment: 
 
-Filename: hat/controller/units/__init__.py
+Filename: hat/controller/api/controller.d.ts
 Comment: 
 
-Filename: hat/controller/interpreters/common.py
+Filename: hat/controller/api/units/triggers.d.ts
 Comment: 
 
-Filename: hat/controller/api/units/log.d.ts
+Filename: hat/controller/json_schema_repo.json
 Comment: 
 
-Filename: hat/controller/units/log.py
+Filename: hat/controller/interpreters/_duktape.abi3.pyd
 Comment: 
 
-Filename: hat/controller/json_schema_repo.json
+Filename: hat/controller/common.py
 Comment: 
 
-Filename: hat/controller/interpreters/duktape.py
+Filename: hat/controller/units/log.py
 Comment: 
 
-Filename: hat/controller/__init__.py
+Filename: hat/controller/api/units/log.d.ts
 Comment: 
 
-Filename: hat/controller/units/timers.py
+Filename: hat/controller/units/__init__.py
 Comment: 
 
-Filename: hat/controller/interpreters/_duktape.abi3.pyd
+Filename: hat/controller/units/os.py
 Comment: 
 
-Filename: hat/controller/interpreters/_quickjs.abi3.pyd
+Filename: hat/controller/interpreters/__init__.py
 Comment: 
 
-Filename: hat_controller-0.1.4.dist-info/LICENSE
+Filename: hat_controller-0.1.5.dist-info/LICENSE
 Comment: 
 
-Filename: hat_controller-0.1.4.dist-info/entry_points.txt
+Filename: hat_controller-0.1.5.dist-info/entry_points.txt
 Comment: 
 
-Filename: hat_controller-0.1.4.dist-info/METADATA
+Filename: hat_controller-0.1.5.dist-info/METADATA
 Comment: 
 
-Filename: hat_controller-0.1.4.dist-info/WHEEL
+Filename: hat_controller-0.1.5.dist-info/WHEEL
 Comment: 
 
-Filename: hat_controller-0.1.4.dist-info/RECORD
+Filename: hat_controller-0.1.5.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## hat/controller/environment.py

```diff
@@ -21,14 +21,15 @@
 
 class Environment(aio.Resource):
 
     def __init__(self,
                  environment_conf: json.Data,
                  proxies: Collection[UnitProxy],
                  trigger_queue_size: int = 4096):
+        self._name = environment_conf['name']
         self._loop = asyncio.get_running_loop()
         self._executor = aio.Executor(log_exceptions=False)
         self._trigger_queue = aio.Queue(trigger_queue_size)
         self._proxies = {proxy.info.name: proxy for proxy in proxies}
         self._last_trigger = None
         self._action_confs = {action_conf['name']: action_conf
                               for action_conf in environment_conf['actions']}
@@ -52,25 +53,27 @@
                             for action_conf in self._action_confs.values()}
             infos = (proxy.info for proxy in self._proxies.values())
 
             evaluator = await self._executor.spawn(
                 hat.controller.evaluator.Evaluator,
                 interpreter_type, action_codes, infos, self._ext_call)
 
-            await self._executor.spawn(evaluator.eval_code, init_code)
+            await self._executor.spawn(self._ext_eval_init, evaluator,
+                                       init_code)
 
             while True:
                 self._last_trigger = await self._trigger_queue.get()
 
                 for action_name in self._get_matching_action_names():
-                    await self._executor.spawn(evaluator.eval_action,
-                                               action_name)
+                    await self._executor.spawn(self._ext_eval_action,
+                                               evaluator, action_name)
 
         except Exception as e:
-            mlog.error('run loop error: %s', e, exc_info=e)
+            mlog.error('environment %s run loop error: %s',
+                       self._name, e, exc_info=e)
 
         finally:
             self.close()
             self._trigger_queue.close()
 
     async def _call(self, unit_name, function, args):
         proxy = self._proxies[unit_name]
@@ -78,14 +81,30 @@
                               self._last_trigger)
 
     def _ext_call(self, unit_name, function, args):
         coro = self._call(unit_name, function, args)
         future = asyncio.run_coroutine_threadsafe(coro, self._loop)
         return future.result()
 
+    def _ext_eval_init(self, evaluator, code):
+        try:
+            evaluator.eval_code(code)
+
+        except Exception as e:
+            mlog.error("environment %s init error: %s",
+                       self._name, e, exc_info=e)
+
+    def _ext_eval_action(self, evaluator, action_name):
+        try:
+            evaluator.eval_action(action_name)
+
+        except Exception as e:
+            mlog.error("environment %s action %s error: %s",
+                       self._name, action_name, e, exc_info=e)
+
     def _get_matching_action_names(self):
         for action_name, action_conf in self._action_confs.items():
             for trigger_conf in action_conf['triggers']:
                 if _match_trigger(self._last_trigger, trigger_conf['type'],
                                   trigger_conf['name']):
                     yield action_name
                     break
```

## Comparing `hat_controller-0.1.4.dist-info/LICENSE` & `hat_controller-0.1.5.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `hat_controller-0.1.4.dist-info/METADATA` & `hat_controller-0.1.5.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: hat-controller
-Version: 0.1.4
+Version: 0.1.5
 Summary: Hat controller
 Description-Content-Type: text/x-rst
 License: Apache-2.0
 Provides-Extra: dev
 Requires-Dist: appdirs ~=1.4.4
 Requires-Dist: hat-aio ~=0.7.9
 Requires-Dist: hat-json ~=0.5.27
```

## Comparing `hat_controller-0.1.4.dist-info/RECORD` & `hat_controller-0.1.5.dist-info/RECORD`

 * *Files 19% similar despite different names*

```diff
@@ -1,30 +1,30 @@
-hat/controller/common.py,sha256=5dlqyf1___tGRyU3NMoZPva5IzUKcXqwFeNohH4VAyI,2609
-hat/controller/main.py,sha256=uiJxJ_Z2g_22nqjmvNjJO1Dg6hYEXdcry3Im9G4_ZYg,1936
+hat/controller/interpreters/_quickjs.abi3.pyd,sha256=PLrOauxAs7Xj7O_d-8OZcsR7JN3-x3FMv_ySy--8crg,1367719
+hat/controller/interpreters/common.py,sha256=-cym3QMHvFhmhSGGnSY3JrF0_JI5fIDpHjbfbhgpghs,519
 hat/controller/__main__.py,sha256=8FxVYsHIYv1BxhgDL-8WMoI_sHMu0o6kow7y_urp4_k,134
-hat/controller/runner.py,sha256=ycOQ6Pw9_sAFNNXNK69dAP4mUb_2FVvwsr3uUMwKAHk,1038
-hat/controller/api/units/timers.d.ts,sha256=Aa0K0375kn4xoxJEw9TgQnh_s1nQ01cmc2O33eAyHc4,422
-hat/controller/environment.py,sha256=bwVJ4hwO_VnirTB-FWpt4T_kSAypLqY0XcwHFU94K3k,3565
-hat/controller/evaluator.py,sha256=4uh9KGAaK1bR-7YRO5yjZ49OqNn5JqB9LkX1y4o_Jow,3309
 hat/controller/api/units/os.d.ts,sha256=1IOpZC5g7soat2sgnoeKlWx6-zKwY54_RZJpZqo5PVI,372
-hat/controller/api/units/triggers.d.ts,sha256=y-0pE-WPHafSVBBxhndFeT-moUIloxgOv1LpufPW0Vk,359
+hat/controller/interpreters/duktape.py,sha256=cfGFi7t8nVihDIIoKIbZWYdQ7HbbnFF5LZky3C_JRE8,280
+hat/controller/api/units/timers.d.ts,sha256=Aa0K0375kn4xoxJEw9TgQnh_s1nQ01cmc2O33eAyHc4,422
 hat/controller/units/triggers.py,sha256=GkjD0NLHmCkzSaTfgzeTP-FFAefClgqczy2Af_uW_K0,1920
-hat/controller/interpreters/__init__.py,sha256=RAAxbU57Alpf8shZbwI5UkpsRIiXCwofv7VcKlPKXtA,731
-hat/controller/api/controller.d.ts,sha256=_-5XfZMxGncmEHurSI4u0036CzMVOeY481V-xdf8SfM,467
+hat/controller/units/timers.py,sha256=kbJyvfXjnDUoDqd8oPqNILoJti3LJ2_G55ubssJeCDM,4420
 hat/controller/interpreters/quickjs.py,sha256=6AxoYhWQMEFP9fV9vWoJC9ipc7ZFrqpKmi-MqlFQoEI,280
-hat/controller/units/os.py,sha256=5kYRQip_DuQQxKm-dFoDbyezZBy3dvJbPa7ssFtulG4,2612
 hat/controller/engine.py,sha256=hOnXjCSo-vQ-fJYHuqmbYQhT2dEU8ohXmZ2HMMYbaYM,2281
-hat/controller/units/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-hat/controller/interpreters/common.py,sha256=-cym3QMHvFhmhSGGnSY3JrF0_JI5fIDpHjbfbhgpghs,519
-hat/controller/api/units/log.d.ts,sha256=I37C7IC_3rhYd6YDl96cTu81XhXLAvcSqQN5m7JFADI,351
-hat/controller/units/log.py,sha256=IF95QZoQAu07KnRkybzYRYon2AnuC8AIAvajAp8pL8g,1619
-hat/controller/json_schema_repo.json,sha256=4rbGtD3xOI8FvlMuMFEx64ZfR3dLFVrKo7J5dO3QQX8,2729
-hat/controller/interpreters/duktape.py,sha256=cfGFi7t8nVihDIIoKIbZWYdQ7HbbnFF5LZky3C_JRE8,280
+hat/controller/environment.py,sha256=5-mIHa-Afe9SN4GrOisA_KNMbqMGTG5wYz1bdkO50SA,4232
+hat/controller/evaluator.py,sha256=4uh9KGAaK1bR-7YRO5yjZ49OqNn5JqB9LkX1y4o_Jow,3309
 hat/controller/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-hat/controller/units/timers.py,sha256=kbJyvfXjnDUoDqd8oPqNILoJti3LJ2_G55ubssJeCDM,4420
-hat/controller/interpreters/_duktape.abi3.pyd,sha256=i8NJwDtAstiXOdptzPxeR2181ih4lKDDVpgVrNRWvfQ,919105
-hat/controller/interpreters/_quickjs.abi3.pyd,sha256=2roZngwuRI9TlOOXeGGu9h5Bsvm4UzPckPDj1JkIJbw,1366251
-hat_controller-0.1.4.dist-info/LICENSE,sha256=z8d0m5b2O9McPEK1xHG_dWgUBT6EfBDz6wA0F7xSPTA,11358
-hat_controller-0.1.4.dist-info/entry_points.txt,sha256=Ap8Jk-_Lc8q_vAp6Z1eu0EkXqnWz5brS4g3mXV_n6Y0,60
-hat_controller-0.1.4.dist-info/METADATA,sha256=J7rs0_Y6rM95ziJGIkZusvcrb0kpto1lfI935dyT_QM,2674
-hat_controller-0.1.4.dist-info/WHEEL,sha256=IsYlU0uzdW6Dk_e49MEI2EK670T-WEmQBOE6mWckNeM,137
-hat_controller-0.1.4.dist-info/RECORD,,
+hat/controller/runner.py,sha256=ycOQ6Pw9_sAFNNXNK69dAP4mUb_2FVvwsr3uUMwKAHk,1038
+hat/controller/main.py,sha256=uiJxJ_Z2g_22nqjmvNjJO1Dg6hYEXdcry3Im9G4_ZYg,1936
+hat/controller/api/controller.d.ts,sha256=_-5XfZMxGncmEHurSI4u0036CzMVOeY481V-xdf8SfM,467
+hat/controller/api/units/triggers.d.ts,sha256=y-0pE-WPHafSVBBxhndFeT-moUIloxgOv1LpufPW0Vk,359
+hat/controller/json_schema_repo.json,sha256=4rbGtD3xOI8FvlMuMFEx64ZfR3dLFVrKo7J5dO3QQX8,2729
+hat/controller/interpreters/_duktape.abi3.pyd,sha256=X-P5AsPKIFx7K3PuRzOeXYF_00J50XNXxx8DoAVt9bk,919105
+hat/controller/common.py,sha256=5dlqyf1___tGRyU3NMoZPva5IzUKcXqwFeNohH4VAyI,2609
+hat/controller/units/log.py,sha256=IF95QZoQAu07KnRkybzYRYon2AnuC8AIAvajAp8pL8g,1619
+hat/controller/api/units/log.d.ts,sha256=I37C7IC_3rhYd6YDl96cTu81XhXLAvcSqQN5m7JFADI,351
+hat/controller/units/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
+hat/controller/units/os.py,sha256=5kYRQip_DuQQxKm-dFoDbyezZBy3dvJbPa7ssFtulG4,2612
+hat/controller/interpreters/__init__.py,sha256=RAAxbU57Alpf8shZbwI5UkpsRIiXCwofv7VcKlPKXtA,731
+hat_controller-0.1.5.dist-info/LICENSE,sha256=z8d0m5b2O9McPEK1xHG_dWgUBT6EfBDz6wA0F7xSPTA,11358
+hat_controller-0.1.5.dist-info/entry_points.txt,sha256=Ap8Jk-_Lc8q_vAp6Z1eu0EkXqnWz5brS4g3mXV_n6Y0,60
+hat_controller-0.1.5.dist-info/METADATA,sha256=lPjDxclFHOX5Sgvcn0qJBbqjElkwdW6EFecjL2HEmuY,2674
+hat_controller-0.1.5.dist-info/WHEEL,sha256=VutkZ49rZMbQuGy2LEkwFrTleT1klLY_SZEueLIjllI,137
+hat_controller-0.1.5.dist-info/RECORD,,
```

